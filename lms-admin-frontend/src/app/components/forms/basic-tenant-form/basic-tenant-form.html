<form class="enhanced-tenant-form">
  <!-- Basic Information Section -->
  <div class="form-section">
    <h3 class="section-title">Basic Information</h3>
    
    <!-- Tenant Name -->
    <div class="form-group">
      <label class="form-label">Tenant Name <span class="required">*</span></label>
      <input 
        type="text" 
        class="form-input" 
        placeholder="Enter Tenant Name"
        [(ngModel)]="formData.name"
        name="name"
        [disabled]="isViewMode"
        (ngModelChange)="onFormChange()"
        required>
    </div>

    <!-- Tenant Domain -->
    <div class="form-group">
      <label class="form-label">Tenant Domain</label>
      <input 
        type="text" 
        class="form-input" 
        placeholder="example.yourdomain.com"
        [(ngModel)]="formData.domain"
        name="domain"
        [disabled]="isViewMode"
        (ngModelChange)="onFormChange()">
    </div>

    <!-- Status -->
    <div class="form-group">
      <label class="form-label">Status <span class="required">*</span></label>
      <div class="select-wrapper">
        <select 
          class="form-select"
          [(ngModel)]="formData.status"
          name="status"
          [disabled]="isViewMode"
          (ngModelChange)="onFormChange()"
          required>
          @for (option of statusOptions; track option.value) {
            <option [value]="option.value">{{ option.label }}</option>
          }
        </select>
        <i class="fas fa-chevron-down select-arrow"></i>
      </div>
    </div>
  </div>

  <!-- File Upload Section -->
  <div class="form-section">
    <h3 class="section-title">Branding Assets</h3>
    
    <!-- Logo Light -->
    <div class="form-group">
      <label class="form-label">Logo (Light Theme)</label>
      @if (!isViewMode) {
        <input 
          type="file" 
          class="form-input-file" 
          accept="image/jpeg,image/png,image/gif,image/webp"
          (change)="onLogoLightChange($event)"
          #logoLightInput>
      }
      @if (formData.logoLightPreview) {
        <div class="file-preview">
          <img [src]="formData.logoLightPreview" alt="Logo Light Preview" class="preview-image">
          @if (!isViewMode) {
            <button type="button" class="btn-remove-file" (click)="removeLogoLight()">
              <i class="fas fa-times"></i>
            </button>
          }
        </div>
      }
    </div>

    <!-- Logo Dark -->
    <div class="form-group">
      <label class="form-label">Logo (Dark Theme)</label>
      @if (!isViewMode) {
        <input 
          type="file" 
          class="form-input-file" 
          accept="image/jpeg,image/png,image/gif,image/webp"
          (change)="onLogoDarkChange($event)"
          #logoDarkInput>
      }
      @if (formData.logoDarkPreview) {
        <div class="file-preview">
          <img [src]="formData.logoDarkPreview" alt="Logo Dark Preview" class="preview-image">
          @if (!isViewMode) {
            <button type="button" class="btn-remove-file" (click)="removeLogoDark()">
              <i class="fas fa-times"></i>
            </button>
          }
        </div>
      }
    </div>

    <!-- Favicon -->
    <div class="form-group">
      <label class="form-label">Favicon</label>
      @if (!isViewMode) {
        <input 
          type="file" 
          class="form-input-file" 
          accept="image/x-icon,image/vnd.microsoft.icon"
          (change)="onFaviconChange($event)"
          #faviconInput>
      }
      @if (formData.faviconPreview) {
        <div class="file-preview">
          <img [src]="formData.faviconPreview" alt="Favicon Preview" class="preview-image preview-small">
          @if (!isViewMode) {
            <button type="button" class="btn-remove-file" (click)="removeFavicon()">
              <i class="fas fa-times"></i>
            </button>
          }
        </div>
      }
    </div>
  </div>

  <!-- Phone Numbers Section -->
  <div class="form-section">
    <div class="section-header">
      <h3 class="section-title">Phone Numbers</h3>
      @if (!isViewMode) {
        <button type="button" class="btn-add-contact" (click)="addPhoneNumber()">
          <i class="ic-plus"></i>
          Add Phone
        </button>
      }
    </div>

    @if (formData.phoneNumbers && formData.phoneNumbers.length > 0) {
      <div class="contacts-list">
        @for (phone of formData.phoneNumbers; track trackByIndex($index)) {
          <div class="contact-row">
            <div class="contact-inputs">
              <!-- Phone Number Widget with Two-Way Binding -->
              <div class="form-group form-group-sm flex-3">
                <app-phone-number
                  label="Phone Number"
                  [inputId]="'phone-' + $index"
                  [(value)]="formData.phoneNumbers![$index]"
                  (valueChange)="onPhoneChange($event, $index)"
                  [required]="true"
                  [disabled]="isViewMode"
                  [selectedCountryISO]="CountryISO.Pakistan"
                  [preferredCountries]="[CountryISO.Pakistan, CountryISO.UnitedStates, CountryISO.UnitedKingdom]"
                  cssClass="form-input-sm">
                </app-phone-number>
              </div>
              
              <!-- Contact Type -->
              <div class="form-group form-group-sm">
                <label class="form-label-sm">Type</label>
                <select 
                  class="form-select-sm" 
                  [(ngModel)]="phone.contactType"
                  [name]="'phoneType' + $index"
                  [disabled]="isViewMode"
                  (ngModelChange)="onFormChange()">
                  @for (type of contactTypeOptions; track type.value) {
                    <option [value]="type.value">{{ type.label }}</option>
                  }
                </select>
              </div>
              
              <!-- Primary Checkbox -->
              <div class="form-group form-group-checkbox">
                <label class="checkbox-label mt-3">
                  <input 
                    type="checkbox" 
                    [(ngModel)]="phone.isPrimary"
                    [name]="'phonePrimary' + $index"
                    [disabled]="isViewMode"
                    (ngModelChange)="togglePhonePrimary($index)">
                  <span>Primary</span>
                </label>
              </div>
            </div>
            @if (!isViewMode) {
              <button type="button" class="mt-4 btn-remove-contact" (click)="removePhoneNumber($index)" title="Delete phone number">
                <i class="ic-delete"></i>
                <span class="sr-only">Delete</span>
              </button>
            }
          </div>
        }
      </div>
    } @else {
      <div class="empty-state-sm">
        @if (isViewMode) {
          <p>No phone numbers added</p>
        } @else {
          <p>Click "Add Phone" to add phone numbers</p>
        }
      </div>
    }
  </div>

  <!-- Email Addresses Section -->
  <div class="form-section">
    <div class="section-header">
      <h3 class="section-title">Email Addresses</h3>
      @if (!isViewMode) {
        <button type="button" class="btn-add-contact" (click)="addEmailAddress()">
          <i class="ic-plus"></i>
          Add Email
        </button>
      }
    </div>

    @if (formData.emailAddresses && formData.emailAddresses.length > 0) {
      <div class="contacts-list">
        @for (email of formData.emailAddresses; track trackByIndex($index)) {
          <div class="contact-row">
            <div class="contact-inputs">
              <div class="form-group form-group-sm flex-3">
                <label class="form-label-sm">Email Address</label>
                <input 
                  type="email" 
                  class="form-input-sm" 
                  [(ngModel)]="email.emailAddress"
                  [name]="'emailAddress' + $index"
                  [disabled]="isViewMode"
                  (ngModelChange)="onFormChange()"
                  placeholder="email@example.com">
              </div>
              <div class="form-group form-group-sm">
                <label class="form-label-sm">Type</label>
                <select 
                  class="form-select-sm" 
                  [(ngModel)]="email.contactType"
                  [name]="'emailType' + $index"
                  [disabled]="isViewMode"
                  (ngModelChange)="onFormChange()">
                  @for (type of contactTypeOptions; track type.value) {
                    <option [value]="type.value">{{ type.label }}</option>
                  }
                </select>
              </div>
              <div class="form-group form-group-checkbox">
                <label class="checkbox-label">
                  <input 
                    type="checkbox" 
                    [(ngModel)]="email.isPrimary"
                    [name]="'emailPrimary' + $index"
                    [disabled]="isViewMode"
                    (ngModelChange)="toggleEmailPrimary($index)">
                  <span>Primary</span>
                </label>
              </div>
            </div>
            @if (!isViewMode) {
              <button type="button" class="btn-remove-contact" (click)="removeEmailAddress($index)" title="Delete email address">
                <i class="ic-delete"></i>
                <span class="sr-only">Delete</span>
              </button>
            }
          </div>
        }
      </div>
    } @else {
      <div class="empty-state-sm">
        @if (isViewMode) {
          <p>No email addresses added</p>
        } @else {
          <p>Click "Add Email" to add email addresses</p>
        }
      </div>
    }
  </div>
</form>
