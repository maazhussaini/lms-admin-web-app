<body class="flex items-center justify-center min-h-screen overflow-hidden">
  <div class="w-full min-h-screen flex relative">
    <div class="flex-1 p-10 md:p-15 flex flex-col justify-center bg-surface max-w-half relative h-screen overflow-hidden">
      <div class="flex items-center justify-between mb-8">
        <div class="flex items-center">
          <img src="assets/images/logo.png" alt="orb-Ed Logo" class="w-20 h-26 mr-3" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
          <div class="logo-fallback" style="display: none;"></div>
        </div>
        
        <!-- Theme Toggle Switch -->
        <div class="toggle-with-label">
          <span class="toggle-label text-sm" [title]="isDarkTheme ? 'Switch to Light Mode' : 'Switch to Dark Mode'">
            {{ isDarkTheme ? 'üåô' : '‚òÄÔ∏è' }}
          </span>
          <label class="toggle toggle-secondary toggle-sm">
            <input 
              type="checkbox" 
              [checked]="isDarkTheme"
              (change)="toggleTheme()"
            >
            <div class="toggle-track"></div>
          </label>
        </div>
      </div>
      
      <div class="text-muted text-base mb-2 font-normal">welcome back!</div>
      <h1 class="text-3xl font-bold text-primary mb-8 leading-tight">Sign In To Your Account</h1>
      
      <form (ngSubmit)="onLogin()" #loginForm="ngForm" class="w-full">
        <div class="mb-6">
          <label class="block text-base font-medium text-secondary mb-2.5" for="email">Email</label>
          <input 
            type="email" 
            id="email" 
            class="input-lg w-full border border-border bg-surface text-primary" 
            placeholder="Enter Your Email" 
            [(ngModel)]="credentials.email_address"
            name="email"
            required
            autocomplete="email"
          >
        </div>
        
        <div class="mb-6">
          <label class="block text-base font-medium text-secondary mb-2.5" for="password">Password</label>
          <div class="relative">
            <input 
              [type]="showPassword ? 'text' : 'password'" 
              id="password" 
              class="input-lg w-full pr-12 border border-border bg-surface text-primary" 
              placeholder="Enter Your Password" 
              [(ngModel)]="credentials.password"
              name="password"
              required
              autocomplete="current-password"
            >
            <button type="button" class="password-toggle absolute right-4 top-3 transform -translate-y-1/2" (click)="togglePassword()">
              {{ showPassword ? 'üôà' : 'üëÅÔ∏è' }}
            </button>
          </div>
          <div class="text-right mt-2.5">
            <a href="javascript:;" (click)="onForgotPassword()" class="text-sm font-medium text-primary-light hover:underline">Forgot Password?</a>
          </div>
        </div>
        <!-- Messages -->
        <div *ngIf="message" class="alert p-3 rounded-lg mt-5 flex items-center gap-2 text-sm font-medium" 
             [ngClass]="messageType === 'error' ? 'alert-danger' : 'alert-success'">
          <i [ngClass]="messageType === 'error' ? 'fas fa-exclamation-circle' : 'fas fa-check-circle'" class="text-base"></i>
          {{ message }}
        </div>
        
        <button 
          type="submit" 
          class="btn btn-primary btn-lg w-full mt-6"
          [disabled]="loading || !loginForm.valid"
        >
          <span *ngIf="loading" class="spinner mr-2"></span>
          {{ loading ? 'Signing In...' : 'Sign In' }}
        </button>
      </form>
      
      <div class="text-center mt-6">
        <a href="javascript:;" class="text-sm font-medium text-primary-light hover:underline">Privacy Policy</a>
      </div>
      
      <!-- User Info (for testing) -->
      <div *ngIf="currentUser" class="user-info mt-5 p-5 bg-light rounded-lg border border-border">
        <div class="user-welcome">
          <h4 class="text-secondary mb-4 font-medium">Welcome, {{ currentUser.full_name }}!</h4>
          <div class="user-details mb-4">
            <p class="my-1 text-sm text-muted"><strong>Role:</strong> {{ currentUser.role.role_name }}</p>
            <p class="my-1 text-sm text-muted"><strong>Email:</strong> {{ currentUser.email }}</p>
            <p *ngIf="currentUser.tenant_id" class="my-1 text-sm text-muted"><strong>Tenant ID:</strong> {{ currentUser.tenant_id }}</p>
          </div>
          
          <div *ngIf="permissions.length > 0" class="permissions mb-4">
            <strong class="text-sm text-muted">Permissions:</strong>
            <ul class="mt-2 ml-4">
              <li *ngFor="let permission of permissions" class="text-xs text-muted my-0.5">{{ permission }}</li>
            </ul>
          </div>
          
          <p class="redirect-info text-primary-light font-medium text-sm text-center m-0">Redirecting to dashboard...</p>
        </div>
      </div>
    </div>
    
    <div class="flex-1 bg-surface bg-cover bg-center bg-no-repeat flex items-center justify-center p-0 max-w-half h-screen signin-bg">
      <div class="signin-illustration-container w-full h-full flex items-center justify-center relative">
        <!-- SVG background is applied via CSS -->
      </div>
    </div>
  </div>
</body>
