<body class="flex items-center justify-center min-h-screen overflow-hidden">
  <div class="w-full min-h-screen flex relative">
    <div class="flex-1 p-10 md:p-15 flex flex-col justify-center bg-surface max-w-half relative h-screen overflow-hidden">
      <div class="flex items-center justify-between mb-8">
        <div class="flex items-center">
          <img src="assets/images/logo.png" alt="orb-Ed Logo" class="w-20 h-26 mr-3" (error)="onImageError($event)">
          <div class="logo-fallback" [style.display]="showLogoIcon ? 'flex' : 'none'"></div>
        </div>
        
        <!-- Theme Toggle Switch -->
        <div class="toggle-with-label">
          <span class="toggle-label text-sm" [title]="isDarkTheme ? 'Switch to Light Mode' : 'Switch to Dark Mode'">
            {{ isDarkTheme ? 'ğŸŒ™' : 'â˜€ï¸' }}
          </span>
          <label class="toggle toggle-secondary toggle-sm">
            <input 
              type="checkbox" 
              [checked]="isDarkTheme"
              (change)="toggleTheme()"
            >
            <div class="toggle-track"></div>
          </label>
        </div>
      </div>
      
      <div class="text-muted text-base mb-2 font-normal">Create a new password to continue</div>
      <h1 class="text-3xl font-bold text-primary mb-8 leading-tight">Reset Your Password</h1>
      
      <form (ngSubmit)="onResetPassword()" #resetForm="ngForm" class="w-full">
        <div class="mb-6">
          <label class="block text-base font-medium text-gray-700 mb-2.5" for="reset-password">Password</label>
          <div class="relative">
            <input 
              type="password" 
              id="reset-password" 
              class="input-lg w-full pr-12 border border-border bg-white text-gray-700" 
              placeholder="Enter Your Password" 
              [(ngModel)]="password"
              name="password"
              #passwordInput="ngModel"
              (input)="onPasswordChange()"
              required>
            <button type="button" class="password-toggle absolute right-4 top-3 transform -translate-y-1/2" (click)="togglePasswordVisibility('password')">
              {{ showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
            </button>
          </div>
          
          <!-- Password Strength Indicator -->
          <div class="mt-3" *ngIf="password.length > 0">
            <div class="h-2 w-full bg-gray-200 rounded-full overflow-hidden">
              <div class="h-full transition-all duration-300 rounded-full" 
                   [style.width]="passwordStrengthPercentage + '%'" 
                   [ngClass]="{
                     'bg-red-500': passwordStrengthClass === 'weak',
                     'bg-yellow-500': passwordStrengthClass === 'good',
                     'bg-green-500': passwordStrengthClass === 'strong'
                   }"></div>
            </div>
            <div class="text-xs mt-1 font-medium" 
                 [ngClass]="{
                   'text-red-600': passwordStrengthClass === 'weak',
                   'text-yellow-600': passwordStrengthClass === 'good',
                   'text-green-600': passwordStrengthClass === 'strong'
                 }">
              {{ passwordStrengthText }}
            </div>
          </div>
        </div>
        
        <div class="mb-6">
          <label class="block text-base font-medium text-gray-700 mb-2.5" for="confirm-password">Confirm Password</label>
          <div class="relative">
            <input 
              type="password" 
              id="confirm-password" 
              class="input-lg w-full pr-12 border border-border bg-white text-gray-700" 
              placeholder="Confirm Your Password" 
              [(ngModel)]="confirmPassword"
              name="confirmPassword"
              #confirmPasswordInput="ngModel"
              (input)="onConfirmPasswordChange()"
              required>
            <button type="button" class="password-toggle absolute right-4 top-3 transform -translate-y-1/2" (click)="togglePasswordVisibility('confirmPassword')">
              {{ showConfirmPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
            </button>
          </div>
          
          <!-- Password Match Indicator -->
          <div class="text-right mt-2.5" *ngIf="confirmPassword">
            <span class="text-xs font-medium" 
                 [ngClass]="{
                   'text-green-600': passwordMatchClass === 'match',
                   'text-red-600': passwordMatchClass === 'no-match'
                 }">
              {{ passwordMatchText }}
            </span>
          </div>
        </div>
        
        <!-- Messages -->
        <div *ngIf="message" class="alert p-3 rounded-lg mt-5 flex items-center gap-2 text-sm font-medium" 
             [ngClass]="messageType === 'danger' ? 'alert-danger' : 'alert-success'">
          <i [ngClass]="messageType === 'danger' ? 'fas fa-exclamation-circle' : 'fas fa-check-circle'" class="text-base"></i>
          {{ message }}
        </div>
        
        <button 
          type="submit" 
          class="btn btn-primary btn-lg w-full mt-6"
          [disabled]="loading || !isFormValid()">
          <span *ngIf="loading" class="spinner mr-2"></span>
          {{ loading ? 'Resetting...' : 'Reset Password' }}
        </button>
      </form>
      
      <div class="text-center mt-6">
        <span class="text-sm text-muted">Remember? </span>
        <button type="button" (click)="goBackToLogin($event)" class="text-sm font-medium text-primary-light hover:underline">
          Back To Login
        </button>
      </div>
    </div>
    
    <div class="flex-1 bg-white bg-cover bg-center bg-no-repeat flex items-center justify-center p-0 max-w-half h-screen reset-password-bg">
      <div class="reset-password-illustration-container w-full h-full flex items-center justify-center relative">
        <!-- SVG background is applied via CSS -->
      </div>
    </div>
  </div>
</body>
